@{
    ViewData["Title"] = "Home";
}

<div class="container py-5">

    <h1 class="text-center fw-bold mb-3" style="color:#007bff;">
        Welcome to the Contract Monthly Claim System (CMCS)
    </h1>

    <p class="text-center text-muted mb-5">
        Streamlining claim submissions, approvals, and tracking for Independent Contractor Lecturers.
    </p>

    <div class="row text-center">

        <!-- Lecturer Section -->
        <div class="col-md-3 mb-4">
            <h5 class="fw-bold" style="color:#0069d9;">Lecturer</h5>
            <p class="small text-muted">
                Submit and track your monthly claims easily, with the ability to upload supporting documents.
            </p>

            @if (User.Identity.IsAuthenticated && User.IsInRole("Lecturer"))
            {
                <a asp-controller="Lecturer" asp-action="SubmitClaim" class="btn btn-primary btn-sm d-block mb-2">Submit Claim</a>
                <a asp-controller="Lecturer" asp-action="TrackClaims" class="btn btn-outline-primary btn-sm d-block">Track Claims</a>
            }
            else
            {
                <a asp-controller="Account" asp-action="Login" class="btn btn-primary btn-sm d-block mb-2">Submit Claim</a>
                <a asp-controller="Account" asp-action="Login" class="btn btn-outline-primary btn-sm d-block">Track Claims</a>
            }
        </div>

        <!-- Coordinator Section -->
        <div class="col-md-3 mb-4">
            <h5 class="fw-bold" style="color:#28a745;">Coordinator</h5>
            <p class="small text-muted">
                Review claims submitted by lecturers and ensure accuracy before forwarding for approval.
            </p>

            @if (User.Identity.IsAuthenticated && User.IsInRole("Coordinator"))
            {
                <a asp-controller="Admin" asp-action="CoordinatorView" class="btn btn-success btn-sm d-block">
                    Review Claims
                </a>
            }
            else
            {
                <a asp-controller="Account" asp-action="Login" class="btn btn-success btn-sm d-block">
                    Review Claims
                </a>
            }
        </div>

        <!-- Manager Section -->
        <div class="col-md-3 mb-4">
            <h5 class="fw-bold" style="color:#dc3545;">Manager</h5>
            <p class="small text-muted">
                Provide the final approval for claims, ensuring accountability and transparency.
            </p>

            @if (User.Identity.IsAuthenticated && User.IsInRole("Manager"))
            {
                <a asp-controller="Admin" asp-action="ManagerView" class="btn btn-danger btn-sm d-block">
                    Final Approval
                </a>
            }
            else
            {
                <a asp-controller="Account" asp-action="Login" class="btn btn-danger btn-sm d-block">
                    Final Approval
                </a>
            }
        </div>

        <!-- HR Administrator Section -->
        <div class="col-md-3 mb-4">
            <h5 class="fw-bold" style="color:#17a2b8;">HR Administrator</h5>
            <p class="small text-muted">
                Manage users, generate reports, and oversee the entire claims management system.
            </p>

            @if (User.Identity.IsAuthenticated && User.IsInRole("HR"))
            {
                <a asp-controller="HR" asp-action="Index" class="btn btn-info btn-sm d-block mb-2">User Management</a>

                <!-- ✔ FIXED: This now calls the CSV export -->
                <a asp-controller="HR" asp-action="ExportClaimsCsv" class="btn btn-outline-info btn-sm d-block">
                    Reports (CSV)
                </a>
            }
            else
            {
                <a asp-controller="Account" asp-action="Login" class="btn btn-info btn-sm d-block mb-2">User Management</a>
                <a asp-controller="Account" asp-action="Login" class="btn btn-outline-info btn-sm d-block">Reports</a>
            }
        </div>

    </div>

    <p class="text-center text-muted small mt-4">
        © 2025 – CMCS Prototype | Functionality will expand in future phases.
    </p>

</div>

<style>
    .btn {
        border-radius: 6px;
    }
</style>
